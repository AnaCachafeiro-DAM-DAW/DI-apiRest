<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:vm="clr-namespace:apiRestEscaladores.MVVM.ModelView;assembly=apiRestEscaladores"
             x:Class="apiRestEscaladores.MainPage">

    <ScrollView>
        <VerticalStackLayout Padding="20">

            <!-- Botón para cargar escaladores -->
            <Button Text="VER LISTA ESCALADORES"
                    Command="{Binding CargarEscaladoresCommand}" 
                    BackgroundColor="#6200EE"
                    Padding="10,5"
                    CornerRadius="30"
                    FontSize="16"
                    BorderWidth="0"
                    HorizontalOptions="Center"
                    VerticalOptions="Center" />

            <!-- Lista de escaladores -->
            <Label Text="ESCALADORES 2025" FontSize="20" TextColor="#6200EE" FontAttributes="Bold" Padding="10"/>

            <CollectionView ItemsSource="{Binding Escaladores}">
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <SwipeView>
                            <!-- Botón para eliminar con Swipe -->
                            <SwipeView.RightItems>
                                <SwipeItems Mode="Execute">
                                    <SwipeItem Text="Eliminar"
                                               BackgroundColor="Red"
                                               Command="{Binding Source={RelativeSource AncestorType={x:Type vm:MainPageVM}}, Path=EliminarEscaladorCommand}"
                                               CommandParameter="{Binding}" />
                                </SwipeItems>
                            </SwipeView.RightItems>

                            <Frame BorderColor="Gray" Padding="10" Margin="5" CornerRadius="10" BackgroundColor="LightGray">
                                <StackLayout>
                                    <!-- Botón para Editar al pinchar lo lleva al formulario -->
                                    <Button Text="EDITAR"
                                            FontAttributes="Bold"
                                            Command="{Binding Source={RelativeSource AncestorType={x:Type vm:MainPageVM}}, Path=SeleccionarEscaladorCommand}"
                                            CommandParameter="{Binding}"
                                            BackgroundColor="White"
                                            TextColor="Black"
                                            Padding="5"
                                            CornerRadius="15"
                                            FontSize="14"
                                            HorizontalOptions="End"/>

                                    <!-- Nombre -->
                                    <Label Text="{Binding Name}" FontSize="22" FontAttributes="Bold" TextColor="Black"/>

                                    <!-- Edad -->
                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Edad: " FontSize="18" FontAttributes="Italic" TextColor="Black"/>
                                        <Label Text="{Binding Age}" FontSize="18" TextColor="Black"/>
                                    </StackLayout>

                                    <!-- Grupo de montaña -->
                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Grupo de Montaña: " FontSize="18" FontAttributes="Italic" TextColor="Black"/>
                                        <Label Text="{Binding MountainGroup}" FontSize="18" TextColor="Black"/>
                                    </StackLayout>

                                    <!-- Experiencia -->
                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Años de experiencia: " FontSize="18" FontAttributes="Italic" TextColor="Black"/>
                                        <Label Text="{Binding Experience}" FontSize="18" TextColor="Black"/>
                                    </StackLayout>

                                    <!-- Federado -->
                                    <StackLayout Orientation="Horizontal">
                                        <Label Text="Federado: " FontSize="18" FontAttributes="Italic" TextColor="Black"/>
                                        <Label Text="{Binding Federado}" FontSize="18" TextColor="Black"/>
                                    </StackLayout>
                                </StackLayout>
                            </Frame>

                        </SwipeView>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

            <!-- Formulario para ingresar nuevo escalador -->
            <Label Text="Zona para Añadir Nuevo Escalador:" FontSize="20" FontAttributes="Bold" TextColor="Black" Padding="10" Margin="5"/>

            <!-- Mostrar los datos del escalador seleccionado en el formulario -->
            <Entry Placeholder="Nombre" Text="{Binding EscaladorSeleccionado.Name}" />
            <Entry Placeholder="Edad" Keyboard="Numeric" Text="{Binding EscaladorSeleccionado.Age}" />
            <Entry Placeholder="Grupo de Montaña" Text="{Binding EscaladorSeleccionado.MountainGroup}"/>
            <Entry Placeholder="Experiencia (Años)" Keyboard="Numeric" Text="{Binding EscaladorSeleccionado.Experience}"/>

            <!-- Mostrar un CheckBox para Federado -->
            <StackLayout Orientation="Horizontal" VerticalOptions="Center">
                <Label Text="Federado:" FontSize="18" TextColor="Black" VerticalOptions="Center"/>
                <CheckBox IsChecked="{Binding EscaladorSeleccionado.Federado}" VerticalOptions="Center"/>
            </StackLayout>

            <!-- Botón para editar escalador -->
            <Button Text="Agregar Escalador"
                    Command="{Binding AgregarOEditarEscaladorCommand}"
                    BackgroundColor="#6200EE"
                    Padding="10"
                    CornerRadius="30"
                    FontSize="16"
                    BorderWidth="0"
                    Margin="5"
                    HorizontalOptions="Center"
                    VerticalOptions="Center" />

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>
