<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="apiRestEscaladores.MainPage"
             Title="Gestión de Escaladores">

    <VerticalStackLayout Padding="15" Spacing="15">

        <!-- Selector de Escalador -->
        <Picker Title="SELECCIONA UN ESCALADOR"
                ItemsSource="{Binding Escaladores}"
                ItemDisplayBinding="{Binding Name}"
                SelectedItem="{Binding EscaladorSeleccionado}" />

        <!-- Formulario -->
        <Entry Placeholder="Nombre" Text="{Binding EscaladorEditable.Name}" />
        <Entry Placeholder="Edad" Keyboard="Numeric" Text="{Binding EscaladorEditable.Age}" />
        <Entry Placeholder="Grupo de Montaña" Text="{Binding EscaladorEditable.MountainGroup}" />
        <Entry Placeholder="Experiencia (Años)" Keyboard="Numeric" Text="{Binding EscaladorEditable.Experience}" />

        <!-- Switch para Federado -->
        <Label Text="Federado" />
        <Switch IsToggled="{Binding EscaladorEditable.Federado}" />

        <!-- Botón de Agregar/Editar -->
        <Button Text="{Binding BotonTexto}"
                FontAttributes="Bold"
                BackgroundColor="#6200EE"
                Command="{Binding AgregarOEditarEscaladorCommand}" />

        <!-- Botón de Eliminar (solo si hay un escalador seleccionado) -->
        <Button Text="Eliminar Escalador"
                FontAttributes="Bold"
                BackgroundColor="Gray"
                Command="{Binding EliminarEscaladorCommand}"
                CommandParameter="{Binding EscaladorSeleccionado}"
                IsEnabled="{Binding PuedeEliminar}" />

        <!-- Botón de Resetear -->
        <Button Text="Resetear Formulario"
                FontAttributes="Bold"
                BackgroundColor="#6200EE"
                Command="{Binding ResetearVistaCommand}" />

        <!-- Lista de Escaladores -->
        <Label Text="Lista Detallada de Escaladores:" FontAttributes="Bold" TextColor="#6200EE" FontSize="Small" />
        <CollectionView ItemsSource="{Binding Escaladores}">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <StackLayout Padding="5">
                        <Label Text="{Binding Name}" FontAttributes="Bold" />
                        <Label Text="{Binding MountainGroup}" />
                        <Label Text="{Binding Age, StringFormat='Edad: {0} años'}" />
                        <Label Text="{Binding Experience, StringFormat='Experiencia: {0} años'}" />
                        <Label Text="{Binding Federado, StringFormat='Federado: {0}'}" />
                       
                    </StackLayout>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

    </VerticalStackLayout>

</ContentPage>
